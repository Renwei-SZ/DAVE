/*
 * Copyright (c) 2022 Renwei
 *
 * This is a free software; you can redistribute it and/or modify
 * it under the terms of the MIT license. See LICENSE for details.
 *
 * ############################# IMPORTANT INFORMATION ############################
 * The code of this file is automatically generated by tools(Tools/auto_code),
 * please do not modify it manually!
 * ############################# IMPORTANT INFORMATION ############################
 * ================================================================================
 */

#include "dave_base.h"
#include "dave_os.h"
#include "dave_tools.h"
#include "dave_3rdparty.h"
#include "t_rpc_ver3_enumdata.h"
#include "t_rpc_ver3_msgdata.h"
#include "t_rpc_ver3_rpcdata.h"
#include "t_rpc_ver3_structdata.h"
#include "tools_log.h"

static void *
_t_rpc_zip(ub msg_id, void *msg_body, ub msg_len)
{
	void *pBson;

	switch((sb)msg_id)
	{
		case AIXMSG_AESTHETICS_REQ:
				pBson = t_rpc_ver3_zip_AIXMsgAestheticsReq((AIXMsgAestheticsReq *)msg_body, msg_len);
			break;
		case AIXMSG_AESTHETICS_RSP:
				pBson = t_rpc_ver3_zip_AIXMsgAestheticsRsp((AIXMsgAestheticsRsp *)msg_body, msg_len);
			break;
		case AIXMSG_IMAGE_CLASSIFICATION_REQ:
				pBson = t_rpc_ver3_zip_AIXMsgImageClassificationReq((AIXMsgImageClassificationReq *)msg_body, msg_len);
			break;
		case AIXMSG_IMAGE_CLASSIFICATION_RSP:
				pBson = t_rpc_ver3_zip_AIXMsgImageClassificationRsp((AIXMsgImageClassificationRsp *)msg_body, msg_len);
			break;
		case APPMSG_FUNCTION_REGISTER_REQ:
				pBson = t_rpc_ver3_zip_AppMsgFunctionRegReq((AppMsgFunctionRegReq *)msg_body, msg_len);
			break;
		case APPMSG_FUNCTION_REGISTER_RSP:
				pBson = t_rpc_ver3_zip_AppMsgFunctionRegRsp((AppMsgFunctionRegRsp *)msg_body, msg_len);
			break;
		case APPMSG_FUNCTION_UNREGISTER_REQ:
				pBson = t_rpc_ver3_zip_AppMsgFunctionUnRegReq((AppMsgFunctionUnRegReq *)msg_body, msg_len);
			break;
		case APPMSG_FUNCTION_UNREGISTER_RSP:
				pBson = t_rpc_ver3_zip_AppMsgFunctionUnRegRsp((AppMsgFunctionUnRegRsp *)msg_body, msg_len);
			break;
		case APPMSG_MCARD_REQ:
				pBson = t_rpc_ver3_zip_AppMsgMCardReq((AppMsgMCardReq *)msg_body, msg_len);
			break;
		case APPMSG_MCARD_RSP:
				pBson = t_rpc_ver3_zip_AppMsgMCardRsp((AppMsgMCardRsp *)msg_body, msg_len);
			break;
		case APPMSG_TALK_MCARD_REQ:
				pBson = t_rpc_ver3_zip_AppMsgTalkMCardReq((AppMsgTalkMCardReq *)msg_body, msg_len);
			break;
		case APPMSG_TALK_MCARD_RSP:
				pBson = t_rpc_ver3_zip_AppMsgTalkMCardRsp((AppMsgTalkMCardRsp *)msg_body, msg_len);
			break;
		case BBSMSG_ADD_COMMENT_REQ:
				pBson = t_rpc_ver3_zip_BBSMsgAddCommentReq((BBSMsgAddCommentReq *)msg_body, msg_len);
			break;
		case BBSMSG_ADD_COMMENT_RSP:
				pBson = t_rpc_ver3_zip_BBSMsgAddCommentRsp((BBSMsgAddCommentRsp *)msg_body, msg_len);
			break;
		case BBSMSG_INQ_COMMENT_REQ:
				pBson = t_rpc_ver3_zip_BBSMsgInqCommentReq((BBSMsgInqCommentReq *)msg_body, msg_len);
			break;
		case BBSMSG_INQ_COMMENT_RSP:
				pBson = t_rpc_ver3_zip_BBSMsgInqCommentRsp((BBSMsgInqCommentRsp *)msg_body, msg_len);
			break;
		case BDATAMSG_MCARD_RECORD:
				pBson = t_rpc_ver3_zip_BdataMCardRecord((BdataMCardRecord *)msg_body, msg_len);
			break;
		case BDATAMSG_TALK_RECORD:
				pBson = t_rpc_ver3_zip_BdataTalkRecord((BdataTalkRecord *)msg_body, msg_len);
			break;
		case CVMSG_FEATURES_DETECTED_REQ:
				pBson = t_rpc_ver3_zip_CVMsgFeaturesDetectedReq((CVMsgFeaturesDetectedReq *)msg_body, msg_len);
			break;
		case CVMSG_FEATURES_DETECTED_RSP:
				pBson = t_rpc_ver3_zip_CVMsgFeaturesDetectedRsp((CVMsgFeaturesDetectedRsp *)msg_body, msg_len);
			break;
		case CVMSG_IMAGE_SEARCH_REQ:
				pBson = t_rpc_ver3_zip_CVMsgImageSearchReq((CVMsgImageSearchReq *)msg_body, msg_len);
			break;
		case CVMSG_IMAGE_SEARCH_RSP:
				pBson = t_rpc_ver3_zip_CVMsgImageSearchRsp((CVMsgImageSearchRsp *)msg_body, msg_len);
			break;
		case CVMSG_PAINTING_AESTHETICS_REQ:
				pBson = t_rpc_ver3_zip_CVMsgPaintingAestheticsReq((CVMsgPaintingAestheticsReq *)msg_body, msg_len);
			break;
		case CVMSG_PAINTING_AESTHETICS_RSP:
				pBson = t_rpc_ver3_zip_CVMsgPaintingAestheticsRsp((CVMsgPaintingAestheticsRsp *)msg_body, msg_len);
			break;
		case CVMSG_SCULPTURES_SEARCH_REQ:
				pBson = t_rpc_ver3_zip_CVMsgSculpturesSearchReq((CVMsgSculpturesSearchReq *)msg_body, msg_len);
			break;
		case CVMSG_SCULPTURES_SEARCH_RSP:
				pBson = t_rpc_ver3_zip_CVMsgSculpturesSearchRsp((CVMsgSculpturesSearchRsp *)msg_body, msg_len);
			break;
		case DBMSG_HYBRID_ADD_LIST_REQ:
				pBson = t_rpc_ver3_zip_DBHybridAddListReq((DBHybridAddListReq *)msg_body, msg_len);
			break;
		case DBMSG_HYBRID_ADD_LIST_RSP:
				pBson = t_rpc_ver3_zip_DBHybridAddListRsp((DBHybridAddListRsp *)msg_body, msg_len);
			break;
		case DBMSG_HYBRID_INQ_LIST_REQ:
				pBson = t_rpc_ver3_zip_DBHybridInqListReq((DBHybridInqListReq *)msg_body, msg_len);
			break;
		case DBMSG_HYBRID_INQ_LIST_RSP:
				pBson = t_rpc_ver3_zip_DBHybridInqListRsp((DBHybridInqListRsp *)msg_body, msg_len);
			break;
		case DBMSG_NOSQL_ADD_TALK_REQ:
				pBson = t_rpc_ver3_zip_DBNosqlAddTalkReq((DBNosqlAddTalkReq *)msg_body, msg_len);
			break;
		case DBMSG_NOSQL_ADD_TALK_RSP:
				pBson = t_rpc_ver3_zip_DBNosqlAddTalkRsp((DBNosqlAddTalkRsp *)msg_body, msg_len);
			break;
		case DBMSG_REDIS_DEL_TABLE_REQ:
				pBson = t_rpc_ver3_zip_DBRedisDelTableReq((DBRedisDelTableReq *)msg_body, msg_len);
			break;
		case DBMSG_REDIS_DEL_TABLE_RSP:
				pBson = t_rpc_ver3_zip_DBRedisDelTableRsp((DBRedisDelTableRsp *)msg_body, msg_len);
			break;
		case DBMSG_SYS_ADD_IMAGE_FEATURE_REQ:
				pBson = t_rpc_ver3_zip_DBSysAddImageFeatureReq((DBSysAddImageFeatureReq *)msg_body, msg_len);
			break;
		case DBMSG_SYS_ADD_IMAGE_FEATURE_RSP:
				pBson = t_rpc_ver3_zip_DBSysAddImageFeatureRsp((DBSysAddImageFeatureRsp *)msg_body, msg_len);
			break;
		case DBMSG_SYS_ADD_WEICHAT_REQ:
				pBson = t_rpc_ver3_zip_DBSysAddWeiChatReq((DBSysAddWeiChatReq *)msg_body, msg_len);
			break;
		case DBMSG_SYS_ADD_WEICHAT_RSP:
				pBson = t_rpc_ver3_zip_DBSysAddWeiChatRsp((DBSysAddWeiChatRsp *)msg_body, msg_len);
			break;
		case DBMSG_SYS_INQ_CHANNEL_REQ:
				pBson = t_rpc_ver3_zip_DBSysInqChannelReq((DBSysInqChannelReq *)msg_body, msg_len);
			break;
		case DBMSG_SYS_INQ_CHANNEL_RSP:
				pBson = t_rpc_ver3_zip_DBSysInqChannelRsp((DBSysInqChannelRsp *)msg_body, msg_len);
			break;
		case DBMSG_SYS_INQ_IMAGE_FEATURE_REQ:
				pBson = t_rpc_ver3_zip_DBSysInqImageFeatureReq((DBSysInqImageFeatureReq *)msg_body, msg_len);
			break;
		case DBMSG_SYS_INQ_IMAGE_FEATURE_RSP:
				pBson = t_rpc_ver3_zip_DBSysInqImageFeatureRsp((DBSysInqImageFeatureRsp *)msg_body, msg_len);
			break;
		case DBMSG_SYS_INQ_IMAGE_REQ:
				pBson = t_rpc_ver3_zip_DBSysInqImageReq((DBSysInqImageReq *)msg_body, msg_len);
			break;
		case DBMSG_SYS_INQ_IMAGE_RSP:
				pBson = t_rpc_ver3_zip_DBSysInqImageRsp((DBSysInqImageRsp *)msg_body, msg_len);
			break;
		case DBMSG_SYS_INQ_MUSEUM_PAGE_REQ:
				pBson = t_rpc_ver3_zip_DBSysInqMuseumPageReq((DBSysInqMuseumPageReq *)msg_body, msg_len);
			break;
		case DBMSG_SYS_INQ_MUSEUM_PAGE_RSP:
				pBson = t_rpc_ver3_zip_DBSysInqMuseumPageRsp((DBSysInqMuseumPageRsp *)msg_body, msg_len);
			break;
		case DBMSG_SYS_INQ_MUSEUM_REQ:
				pBson = t_rpc_ver3_zip_DBSysInqMuseumReq((DBSysInqMuseumReq *)msg_body, msg_len);
			break;
		case DBMSG_SYS_INQ_MUSEUM_RSP:
				pBson = t_rpc_ver3_zip_DBSysInqMuseumRsp((DBSysInqMuseumRsp *)msg_body, msg_len);
			break;
		case DBMSG_SYS_INQ_PAINTER_PAGE_REQ:
				pBson = t_rpc_ver3_zip_DBSysInqPainterPageReq((DBSysInqPainterPageReq *)msg_body, msg_len);
			break;
		case DBMSG_SYS_INQ_PAINTER_PAGE_RSP:
				pBson = t_rpc_ver3_zip_DBSysInqPainterPageRsp((DBSysInqPainterPageRsp *)msg_body, msg_len);
			break;
		case DBMSG_SYS_INQ_WEICHAT_REQ:
				pBson = t_rpc_ver3_zip_DBSysInqWeiChatReq((DBSysInqWeiChatReq *)msg_body, msg_len);
			break;
		case DBMSG_SYS_INQ_WEICHAT_RSP:
				pBson = t_rpc_ver3_zip_DBSysInqWeiChatRsp((DBSysInqWeiChatRsp *)msg_body, msg_len);
			break;
		case HTTPMSG_CLOSE_REQ:
				pBson = t_rpc_ver3_zip_HTTPCloseReq((HTTPCloseReq *)msg_body, msg_len);
			break;
		case HTTPMSG_CLOSE_RSP:
				pBson = t_rpc_ver3_zip_HTTPCloseRsp((HTTPCloseRsp *)msg_body, msg_len);
			break;
		case HTTPMSG_LISTEN_REQ:
				pBson = t_rpc_ver3_zip_HTTPListenReq((HTTPListenReq *)msg_body, msg_len);
			break;
		case HTTPMSG_LISTEN_RSP:
				pBson = t_rpc_ver3_zip_HTTPListenRsp((HTTPListenRsp *)msg_body, msg_len);
			break;
		case HTTPMSG_POST_REQ:
				pBson = t_rpc_ver3_zip_HTTPPostReq((HTTPPostReq *)msg_body, msg_len);
			break;
		case HTTPMSG_POST_RSP:
				pBson = t_rpc_ver3_zip_HTTPPostRsp((HTTPPostRsp *)msg_body, msg_len);
			break;
		case HTTPMSG_RECV_REQ:
				pBson = t_rpc_ver3_zip_HTTPRecvReq((HTTPRecvReq *)msg_body, msg_len);
			break;
		case HTTPMSG_RECV_RSP:
				pBson = t_rpc_ver3_zip_HTTPRecvRsp((HTTPRecvRsp *)msg_body, msg_len);
			break;
		case MAINMSG_PYTHON_REQ:
				pBson = t_rpc_ver3_zip_MainMsgPythonReq((MainMsgPythonReq *)msg_body, msg_len);
			break;
		case MAINMSG_PYTHON_RSP:
				pBson = t_rpc_ver3_zip_MainMsgPythonRsp((MainMsgPythonRsp *)msg_body, msg_len);
			break;
		case MSGID_BLOCKS_REQ:
				pBson = t_rpc_ver3_zip_MsgBlocksReq((MsgBlocksReq *)msg_body, msg_len);
			break;
		case MSGID_BLOCKS_RSP:
				pBson = t_rpc_ver3_zip_MsgBlocksRsp((MsgBlocksRsp *)msg_body, msg_len);
			break;
		case MSGID_CFG_UPDATE:
				pBson = t_rpc_ver3_zip_CFGUpdate((CFGUpdate *)msg_body, msg_len);
			break;
		case MSGID_CLIENT_BUSY:
				pBson = t_rpc_ver3_zip_ClientBusy((ClientBusy *)msg_body, msg_len);
			break;
		case MSGID_CLIENT_IDLE:
				pBson = t_rpc_ver3_zip_ClientIdle((ClientIdle *)msg_body, msg_len);
			break;
		case MSGID_COROUTINE_WAKEUP:
				pBson = t_rpc_ver3_zip_CoroutineWakeup((CoroutineWakeup *)msg_body, msg_len);
			break;
		case MSGID_DEBUG_REQ:
				pBson = t_rpc_ver3_zip_DebugReq((DebugReq *)msg_body, msg_len);
			break;
		case MSGID_DEBUG_RSP:
				pBson = t_rpc_ver3_zip_DebugRsp((DebugRsp *)msg_body, msg_len);
			break;
		case MSGID_ECHO:
				pBson = t_rpc_ver3_zip_MsgIdEcho((MsgIdEcho *)msg_body, msg_len);
			break;
		case MSGID_INTERNAL_EVENTS:
				pBson = t_rpc_ver3_zip_InternalEvents((InternalEvents *)msg_body, msg_len);
			break;
		case MSGID_INTERNAL_LOOP:
				pBson = t_rpc_ver3_zip_InternalLoop((InternalLoop *)msg_body, msg_len);
			break;
		case MSGID_LOCAL_THREAD_READY:
				pBson = t_rpc_ver3_zip_ThreadLocalReadyMsg((ThreadLocalReadyMsg *)msg_body, msg_len);
			break;
		case MSGID_LOCAL_THREAD_REMOVE:
				pBson = t_rpc_ver3_zip_ThreadLocalRemoveMsg((ThreadLocalRemoveMsg *)msg_body, msg_len);
			break;
		case MSGID_MEMORY_WARNING:
				pBson = t_rpc_ver3_zip_MemoryWarning((MemoryWarning *)msg_body, msg_len);
			break;
		case MSGID_OS_NOTIFY:
				pBson = t_rpc_ver3_zip_MsgOSNotify((MsgOSNotify *)msg_body, msg_len);
			break;
		case MSGID_POWER_OFF:
				pBson = t_rpc_ver3_zip_POWEROFFMSG((POWEROFFMSG *)msg_body, msg_len);
			break;
		case MSGID_PROCESS_MSG_TIMER_OUT:
				pBson = t_rpc_ver3_zip_ProcessMsgTimerOutMsg((ProcessMsgTimerOutMsg *)msg_body, msg_len);
			break;
		case MSGID_REMOTE_THREAD_ID_READY:
				pBson = t_rpc_ver3_zip_ThreadRemoteIDReadyMsg((ThreadRemoteIDReadyMsg *)msg_body, msg_len);
			break;
		case MSGID_REMOTE_THREAD_ID_REMOVE:
				pBson = t_rpc_ver3_zip_ThreadRemoteIDRemoveMsg((ThreadRemoteIDRemoveMsg *)msg_body, msg_len);
			break;
		case MSGID_REMOTE_THREAD_READY:
				pBson = t_rpc_ver3_zip_ThreadRemoteReadyMsg((ThreadRemoteReadyMsg *)msg_body, msg_len);
			break;
		case MSGID_REMOTE_THREAD_REMOVE:
				pBson = t_rpc_ver3_zip_ThreadRemoteRemoveMsg((ThreadRemoteRemoveMsg *)msg_body, msg_len);
			break;
		case MSGID_RESTART_REQ:
				pBson = t_rpc_ver3_zip_RESTARTREQMSG((RESTARTREQMSG *)msg_body, msg_len);
			break;
		case MSGID_RESTART_RSP:
				pBson = t_rpc_ver3_zip_RESTARTRSPMSG((RESTARTRSPMSG *)msg_body, msg_len);
			break;
		case MSGID_RPC_DEBUG_REQ:
				pBson = t_rpc_ver3_zip_RPCDebugReq((RPCDebugReq *)msg_body, msg_len);
			break;
		case MSGID_RPC_DEBUG_RSP:
				pBson = t_rpc_ver3_zip_RPCDebugRsp((RPCDebugRsp *)msg_body, msg_len);
			break;
		case MSGID_RUN_FUNCTION:
				pBson = t_rpc_ver3_zip_RUNFUNCTIONMSG((RUNFUNCTIONMSG *)msg_body, msg_len);
			break;
		case MSGID_SYSTEM_DECOUPLING:
				pBson = t_rpc_ver3_zip_SystemDecoupling((SystemDecoupling *)msg_body, msg_len);
			break;
		case MSGID_SYSTEM_MOUNT:
				pBson = t_rpc_ver3_zip_SystemMount((SystemMount *)msg_body, msg_len);
			break;
		case MSGID_TEMPORARILY_DEFINE_MESSAGE:
				pBson = t_rpc_ver3_zip_TemporarilyDefineMessageMsg((TemporarilyDefineMessageMsg *)msg_body, msg_len);
			break;
		case MSGID_TEST:
				pBson = t_rpc_ver3_zip_TESTMSG((TESTMSG *)msg_body, msg_len);
			break;
		case MSGID_THREAD_BUSY:
				pBson = t_rpc_ver3_zip_ThreadBusy((ThreadBusy *)msg_body, msg_len);
			break;
		case MSGID_THREAD_IDLE:
				pBson = t_rpc_ver3_zip_ThreadIdle((ThreadIdle *)msg_body, msg_len);
			break;
		case MSGID_TIMER:
				pBson = t_rpc_ver3_zip_TIMERMSG((TIMERMSG *)msg_body, msg_len);
			break;
		case MSGID_TRACE_SWITCH:
				pBson = t_rpc_ver3_zip_TraceSwitchMsg((TraceSwitchMsg *)msg_body, msg_len);
			break;
		case MSGID_WAKEUP:
				pBson = t_rpc_ver3_zip_WAKEUPMSG((WAKEUPMSG *)msg_body, msg_len);
			break;
		case SOCKET_BIND_REQ:
				pBson = t_rpc_ver3_zip_SocketBindReq((SocketBindReq *)msg_body, msg_len);
			break;
		case SOCKET_BIND_RSP:
				pBson = t_rpc_ver3_zip_SocketBindRsp((SocketBindRsp *)msg_body, msg_len);
			break;
		case SOCKET_CONNECT_REQ:
				pBson = t_rpc_ver3_zip_SocketConnectReq((SocketConnectReq *)msg_body, msg_len);
			break;
		case SOCKET_CONNECT_RSP:
				pBson = t_rpc_ver3_zip_SocketConnectRsp((SocketConnectRsp *)msg_body, msg_len);
			break;
		case SOCKET_DISCONNECT_REQ:
				pBson = t_rpc_ver3_zip_SocketDisconnectReq((SocketDisconnectReq *)msg_body, msg_len);
			break;
		case SOCKET_DISCONNECT_RSP:
				pBson = t_rpc_ver3_zip_SocketDisconnectRsp((SocketDisconnectRsp *)msg_body, msg_len);
			break;
		case SOCKET_NOTIFY:
				pBson = t_rpc_ver3_zip_SocketNotify((SocketNotify *)msg_body, msg_len);
			break;
		case SOCKET_PLUGIN:
				pBson = t_rpc_ver3_zip_SocketPlugIn((SocketPlugIn *)msg_body, msg_len);
			break;
		case SOCKET_PLUGOUT:
				pBson = t_rpc_ver3_zip_SocketPlugOut((SocketPlugOut *)msg_body, msg_len);
			break;
		case SOCKET_RAW_EVENT:
				pBson = t_rpc_ver3_zip_SocketRawEvent((SocketRawEvent *)msg_body, msg_len);
			break;
		case SOCKET_READ:
				pBson = t_rpc_ver3_zip_SocketRead((SocketRead *)msg_body, msg_len);
			break;
		case SOCKET_WRITE:
				pBson = t_rpc_ver3_zip_SocketWrite((SocketWrite *)msg_body, msg_len);
			break;
		case UIP_DATA_RECV_REQ:
				pBson = t_rpc_ver3_zip_UIPDataRecvReq((UIPDataRecvReq *)msg_body, msg_len);
			break;
		case UIP_DATA_RECV_RSP:
				pBson = t_rpc_ver3_zip_UIPDataRecvRsp((UIPDataRecvRsp *)msg_body, msg_len);
			break;
		case UIP_DATA_SEND_REQ:
				pBson = t_rpc_ver3_zip_UIPDataSendReq((UIPDataSendReq *)msg_body, msg_len);
			break;
		case UIP_DATA_SEND_RSP:
				pBson = t_rpc_ver3_zip_UIPDataSendRsp((UIPDataSendRsp *)msg_body, msg_len);
			break;
		case UIP_REGISTER_REQ:
				pBson = t_rpc_ver3_zip_UIPRegisterReq((UIPRegisterReq *)msg_body, msg_len);
			break;
		case UIP_REGISTER_RSP:
				pBson = t_rpc_ver3_zip_UIPRegisterRsp((UIPRegisterRsp *)msg_body, msg_len);
			break;
		case UIP_UNREGISTER_REQ:
				pBson = t_rpc_ver3_zip_UIPUnregisterReq((UIPUnregisterReq *)msg_body, msg_len);
			break;
		case UIP_UNREGISTER_RSP:
				pBson = t_rpc_ver3_zip_UIPUnregisterRsp((UIPUnregisterRsp *)msg_body, msg_len);
			break;
		default:
				TOOLSLOG("msg_id:%d zip failed!", msg_id);
 				pBson = NULL;
			break;
	}

	return pBson;
}

static dave_bool
_t_rpc_unzip(void **msg_body, ub *msg_len, ub msg_id, void *pBson)
{
	dave_bool ret;

	switch((sb)msg_id)
	{
		case AIXMSG_AESTHETICS_REQ:
				ret = t_rpc_ver3_unzip_AIXMsgAestheticsReq(msg_body, msg_len, pBson);
			break;
		case AIXMSG_AESTHETICS_RSP:
				ret = t_rpc_ver3_unzip_AIXMsgAestheticsRsp(msg_body, msg_len, pBson);
			break;
		case AIXMSG_IMAGE_CLASSIFICATION_REQ:
				ret = t_rpc_ver3_unzip_AIXMsgImageClassificationReq(msg_body, msg_len, pBson);
			break;
		case AIXMSG_IMAGE_CLASSIFICATION_RSP:
				ret = t_rpc_ver3_unzip_AIXMsgImageClassificationRsp(msg_body, msg_len, pBson);
			break;
		case APPMSG_FUNCTION_REGISTER_REQ:
				ret = t_rpc_ver3_unzip_AppMsgFunctionRegReq(msg_body, msg_len, pBson);
			break;
		case APPMSG_FUNCTION_REGISTER_RSP:
				ret = t_rpc_ver3_unzip_AppMsgFunctionRegRsp(msg_body, msg_len, pBson);
			break;
		case APPMSG_FUNCTION_UNREGISTER_REQ:
				ret = t_rpc_ver3_unzip_AppMsgFunctionUnRegReq(msg_body, msg_len, pBson);
			break;
		case APPMSG_FUNCTION_UNREGISTER_RSP:
				ret = t_rpc_ver3_unzip_AppMsgFunctionUnRegRsp(msg_body, msg_len, pBson);
			break;
		case APPMSG_MCARD_REQ:
				ret = t_rpc_ver3_unzip_AppMsgMCardReq(msg_body, msg_len, pBson);
			break;
		case APPMSG_MCARD_RSP:
				ret = t_rpc_ver3_unzip_AppMsgMCardRsp(msg_body, msg_len, pBson);
			break;
		case APPMSG_TALK_MCARD_REQ:
				ret = t_rpc_ver3_unzip_AppMsgTalkMCardReq(msg_body, msg_len, pBson);
			break;
		case APPMSG_TALK_MCARD_RSP:
				ret = t_rpc_ver3_unzip_AppMsgTalkMCardRsp(msg_body, msg_len, pBson);
			break;
		case BBSMSG_ADD_COMMENT_REQ:
				ret = t_rpc_ver3_unzip_BBSMsgAddCommentReq(msg_body, msg_len, pBson);
			break;
		case BBSMSG_ADD_COMMENT_RSP:
				ret = t_rpc_ver3_unzip_BBSMsgAddCommentRsp(msg_body, msg_len, pBson);
			break;
		case BBSMSG_INQ_COMMENT_REQ:
				ret = t_rpc_ver3_unzip_BBSMsgInqCommentReq(msg_body, msg_len, pBson);
			break;
		case BBSMSG_INQ_COMMENT_RSP:
				ret = t_rpc_ver3_unzip_BBSMsgInqCommentRsp(msg_body, msg_len, pBson);
			break;
		case BDATAMSG_MCARD_RECORD:
				ret = t_rpc_ver3_unzip_BdataMCardRecord(msg_body, msg_len, pBson);
			break;
		case BDATAMSG_TALK_RECORD:
				ret = t_rpc_ver3_unzip_BdataTalkRecord(msg_body, msg_len, pBson);
			break;
		case CVMSG_FEATURES_DETECTED_REQ:
				ret = t_rpc_ver3_unzip_CVMsgFeaturesDetectedReq(msg_body, msg_len, pBson);
			break;
		case CVMSG_FEATURES_DETECTED_RSP:
				ret = t_rpc_ver3_unzip_CVMsgFeaturesDetectedRsp(msg_body, msg_len, pBson);
			break;
		case CVMSG_IMAGE_SEARCH_REQ:
				ret = t_rpc_ver3_unzip_CVMsgImageSearchReq(msg_body, msg_len, pBson);
			break;
		case CVMSG_IMAGE_SEARCH_RSP:
				ret = t_rpc_ver3_unzip_CVMsgImageSearchRsp(msg_body, msg_len, pBson);
			break;
		case CVMSG_PAINTING_AESTHETICS_REQ:
				ret = t_rpc_ver3_unzip_CVMsgPaintingAestheticsReq(msg_body, msg_len, pBson);
			break;
		case CVMSG_PAINTING_AESTHETICS_RSP:
				ret = t_rpc_ver3_unzip_CVMsgPaintingAestheticsRsp(msg_body, msg_len, pBson);
			break;
		case CVMSG_SCULPTURES_SEARCH_REQ:
				ret = t_rpc_ver3_unzip_CVMsgSculpturesSearchReq(msg_body, msg_len, pBson);
			break;
		case CVMSG_SCULPTURES_SEARCH_RSP:
				ret = t_rpc_ver3_unzip_CVMsgSculpturesSearchRsp(msg_body, msg_len, pBson);
			break;
		case DBMSG_HYBRID_ADD_LIST_REQ:
				ret = t_rpc_ver3_unzip_DBHybridAddListReq(msg_body, msg_len, pBson);
			break;
		case DBMSG_HYBRID_ADD_LIST_RSP:
				ret = t_rpc_ver3_unzip_DBHybridAddListRsp(msg_body, msg_len, pBson);
			break;
		case DBMSG_HYBRID_INQ_LIST_REQ:
				ret = t_rpc_ver3_unzip_DBHybridInqListReq(msg_body, msg_len, pBson);
			break;
		case DBMSG_HYBRID_INQ_LIST_RSP:
				ret = t_rpc_ver3_unzip_DBHybridInqListRsp(msg_body, msg_len, pBson);
			break;
		case DBMSG_NOSQL_ADD_TALK_REQ:
				ret = t_rpc_ver3_unzip_DBNosqlAddTalkReq(msg_body, msg_len, pBson);
			break;
		case DBMSG_NOSQL_ADD_TALK_RSP:
				ret = t_rpc_ver3_unzip_DBNosqlAddTalkRsp(msg_body, msg_len, pBson);
			break;
		case DBMSG_REDIS_DEL_TABLE_REQ:
				ret = t_rpc_ver3_unzip_DBRedisDelTableReq(msg_body, msg_len, pBson);
			break;
		case DBMSG_REDIS_DEL_TABLE_RSP:
				ret = t_rpc_ver3_unzip_DBRedisDelTableRsp(msg_body, msg_len, pBson);
			break;
		case DBMSG_SYS_ADD_IMAGE_FEATURE_REQ:
				ret = t_rpc_ver3_unzip_DBSysAddImageFeatureReq(msg_body, msg_len, pBson);
			break;
		case DBMSG_SYS_ADD_IMAGE_FEATURE_RSP:
				ret = t_rpc_ver3_unzip_DBSysAddImageFeatureRsp(msg_body, msg_len, pBson);
			break;
		case DBMSG_SYS_ADD_WEICHAT_REQ:
				ret = t_rpc_ver3_unzip_DBSysAddWeiChatReq(msg_body, msg_len, pBson);
			break;
		case DBMSG_SYS_ADD_WEICHAT_RSP:
				ret = t_rpc_ver3_unzip_DBSysAddWeiChatRsp(msg_body, msg_len, pBson);
			break;
		case DBMSG_SYS_INQ_CHANNEL_REQ:
				ret = t_rpc_ver3_unzip_DBSysInqChannelReq(msg_body, msg_len, pBson);
			break;
		case DBMSG_SYS_INQ_CHANNEL_RSP:
				ret = t_rpc_ver3_unzip_DBSysInqChannelRsp(msg_body, msg_len, pBson);
			break;
		case DBMSG_SYS_INQ_IMAGE_FEATURE_REQ:
				ret = t_rpc_ver3_unzip_DBSysInqImageFeatureReq(msg_body, msg_len, pBson);
			break;
		case DBMSG_SYS_INQ_IMAGE_FEATURE_RSP:
				ret = t_rpc_ver3_unzip_DBSysInqImageFeatureRsp(msg_body, msg_len, pBson);
			break;
		case DBMSG_SYS_INQ_IMAGE_REQ:
				ret = t_rpc_ver3_unzip_DBSysInqImageReq(msg_body, msg_len, pBson);
			break;
		case DBMSG_SYS_INQ_IMAGE_RSP:
				ret = t_rpc_ver3_unzip_DBSysInqImageRsp(msg_body, msg_len, pBson);
			break;
		case DBMSG_SYS_INQ_MUSEUM_PAGE_REQ:
				ret = t_rpc_ver3_unzip_DBSysInqMuseumPageReq(msg_body, msg_len, pBson);
			break;
		case DBMSG_SYS_INQ_MUSEUM_PAGE_RSP:
				ret = t_rpc_ver3_unzip_DBSysInqMuseumPageRsp(msg_body, msg_len, pBson);
			break;
		case DBMSG_SYS_INQ_MUSEUM_REQ:
				ret = t_rpc_ver3_unzip_DBSysInqMuseumReq(msg_body, msg_len, pBson);
			break;
		case DBMSG_SYS_INQ_MUSEUM_RSP:
				ret = t_rpc_ver3_unzip_DBSysInqMuseumRsp(msg_body, msg_len, pBson);
			break;
		case DBMSG_SYS_INQ_PAINTER_PAGE_REQ:
				ret = t_rpc_ver3_unzip_DBSysInqPainterPageReq(msg_body, msg_len, pBson);
			break;
		case DBMSG_SYS_INQ_PAINTER_PAGE_RSP:
				ret = t_rpc_ver3_unzip_DBSysInqPainterPageRsp(msg_body, msg_len, pBson);
			break;
		case DBMSG_SYS_INQ_WEICHAT_REQ:
				ret = t_rpc_ver3_unzip_DBSysInqWeiChatReq(msg_body, msg_len, pBson);
			break;
		case DBMSG_SYS_INQ_WEICHAT_RSP:
				ret = t_rpc_ver3_unzip_DBSysInqWeiChatRsp(msg_body, msg_len, pBson);
			break;
		case HTTPMSG_CLOSE_REQ:
				ret = t_rpc_ver3_unzip_HTTPCloseReq(msg_body, msg_len, pBson);
			break;
		case HTTPMSG_CLOSE_RSP:
				ret = t_rpc_ver3_unzip_HTTPCloseRsp(msg_body, msg_len, pBson);
			break;
		case HTTPMSG_LISTEN_REQ:
				ret = t_rpc_ver3_unzip_HTTPListenReq(msg_body, msg_len, pBson);
			break;
		case HTTPMSG_LISTEN_RSP:
				ret = t_rpc_ver3_unzip_HTTPListenRsp(msg_body, msg_len, pBson);
			break;
		case HTTPMSG_POST_REQ:
				ret = t_rpc_ver3_unzip_HTTPPostReq(msg_body, msg_len, pBson);
			break;
		case HTTPMSG_POST_RSP:
				ret = t_rpc_ver3_unzip_HTTPPostRsp(msg_body, msg_len, pBson);
			break;
		case HTTPMSG_RECV_REQ:
				ret = t_rpc_ver3_unzip_HTTPRecvReq(msg_body, msg_len, pBson);
			break;
		case HTTPMSG_RECV_RSP:
				ret = t_rpc_ver3_unzip_HTTPRecvRsp(msg_body, msg_len, pBson);
			break;
		case MAINMSG_PYTHON_REQ:
				ret = t_rpc_ver3_unzip_MainMsgPythonReq(msg_body, msg_len, pBson);
			break;
		case MAINMSG_PYTHON_RSP:
				ret = t_rpc_ver3_unzip_MainMsgPythonRsp(msg_body, msg_len, pBson);
			break;
		case MSGID_BLOCKS_REQ:
				ret = t_rpc_ver3_unzip_MsgBlocksReq(msg_body, msg_len, pBson);
			break;
		case MSGID_BLOCKS_RSP:
				ret = t_rpc_ver3_unzip_MsgBlocksRsp(msg_body, msg_len, pBson);
			break;
		case MSGID_CFG_UPDATE:
				ret = t_rpc_ver3_unzip_CFGUpdate(msg_body, msg_len, pBson);
			break;
		case MSGID_CLIENT_BUSY:
				ret = t_rpc_ver3_unzip_ClientBusy(msg_body, msg_len, pBson);
			break;
		case MSGID_CLIENT_IDLE:
				ret = t_rpc_ver3_unzip_ClientIdle(msg_body, msg_len, pBson);
			break;
		case MSGID_COROUTINE_WAKEUP:
				ret = t_rpc_ver3_unzip_CoroutineWakeup(msg_body, msg_len, pBson);
			break;
		case MSGID_DEBUG_REQ:
				ret = t_rpc_ver3_unzip_DebugReq(msg_body, msg_len, pBson);
			break;
		case MSGID_DEBUG_RSP:
				ret = t_rpc_ver3_unzip_DebugRsp(msg_body, msg_len, pBson);
			break;
		case MSGID_ECHO:
				ret = t_rpc_ver3_unzip_MsgIdEcho(msg_body, msg_len, pBson);
			break;
		case MSGID_INTERNAL_EVENTS:
				ret = t_rpc_ver3_unzip_InternalEvents(msg_body, msg_len, pBson);
			break;
		case MSGID_INTERNAL_LOOP:
				ret = t_rpc_ver3_unzip_InternalLoop(msg_body, msg_len, pBson);
			break;
		case MSGID_LOCAL_THREAD_READY:
				ret = t_rpc_ver3_unzip_ThreadLocalReadyMsg(msg_body, msg_len, pBson);
			break;
		case MSGID_LOCAL_THREAD_REMOVE:
				ret = t_rpc_ver3_unzip_ThreadLocalRemoveMsg(msg_body, msg_len, pBson);
			break;
		case MSGID_MEMORY_WARNING:
				ret = t_rpc_ver3_unzip_MemoryWarning(msg_body, msg_len, pBson);
			break;
		case MSGID_OS_NOTIFY:
				ret = t_rpc_ver3_unzip_MsgOSNotify(msg_body, msg_len, pBson);
			break;
		case MSGID_POWER_OFF:
				ret = t_rpc_ver3_unzip_POWEROFFMSG(msg_body, msg_len, pBson);
			break;
		case MSGID_PROCESS_MSG_TIMER_OUT:
				ret = t_rpc_ver3_unzip_ProcessMsgTimerOutMsg(msg_body, msg_len, pBson);
			break;
		case MSGID_REMOTE_THREAD_ID_READY:
				ret = t_rpc_ver3_unzip_ThreadRemoteIDReadyMsg(msg_body, msg_len, pBson);
			break;
		case MSGID_REMOTE_THREAD_ID_REMOVE:
				ret = t_rpc_ver3_unzip_ThreadRemoteIDRemoveMsg(msg_body, msg_len, pBson);
			break;
		case MSGID_REMOTE_THREAD_READY:
				ret = t_rpc_ver3_unzip_ThreadRemoteReadyMsg(msg_body, msg_len, pBson);
			break;
		case MSGID_REMOTE_THREAD_REMOVE:
				ret = t_rpc_ver3_unzip_ThreadRemoteRemoveMsg(msg_body, msg_len, pBson);
			break;
		case MSGID_RESTART_REQ:
				ret = t_rpc_ver3_unzip_RESTARTREQMSG(msg_body, msg_len, pBson);
			break;
		case MSGID_RESTART_RSP:
				ret = t_rpc_ver3_unzip_RESTARTRSPMSG(msg_body, msg_len, pBson);
			break;
		case MSGID_RPC_DEBUG_REQ:
				ret = t_rpc_ver3_unzip_RPCDebugReq(msg_body, msg_len, pBson);
			break;
		case MSGID_RPC_DEBUG_RSP:
				ret = t_rpc_ver3_unzip_RPCDebugRsp(msg_body, msg_len, pBson);
			break;
		case MSGID_RUN_FUNCTION:
				ret = t_rpc_ver3_unzip_RUNFUNCTIONMSG(msg_body, msg_len, pBson);
			break;
		case MSGID_SYSTEM_DECOUPLING:
				ret = t_rpc_ver3_unzip_SystemDecoupling(msg_body, msg_len, pBson);
			break;
		case MSGID_SYSTEM_MOUNT:
				ret = t_rpc_ver3_unzip_SystemMount(msg_body, msg_len, pBson);
			break;
		case MSGID_TEMPORARILY_DEFINE_MESSAGE:
				ret = t_rpc_ver3_unzip_TemporarilyDefineMessageMsg(msg_body, msg_len, pBson);
			break;
		case MSGID_TEST:
				ret = t_rpc_ver3_unzip_TESTMSG(msg_body, msg_len, pBson);
			break;
		case MSGID_THREAD_BUSY:
				ret = t_rpc_ver3_unzip_ThreadBusy(msg_body, msg_len, pBson);
			break;
		case MSGID_THREAD_IDLE:
				ret = t_rpc_ver3_unzip_ThreadIdle(msg_body, msg_len, pBson);
			break;
		case MSGID_TIMER:
				ret = t_rpc_ver3_unzip_TIMERMSG(msg_body, msg_len, pBson);
			break;
		case MSGID_TRACE_SWITCH:
				ret = t_rpc_ver3_unzip_TraceSwitchMsg(msg_body, msg_len, pBson);
			break;
		case MSGID_WAKEUP:
				ret = t_rpc_ver3_unzip_WAKEUPMSG(msg_body, msg_len, pBson);
			break;
		case SOCKET_BIND_REQ:
				ret = t_rpc_ver3_unzip_SocketBindReq(msg_body, msg_len, pBson);
			break;
		case SOCKET_BIND_RSP:
				ret = t_rpc_ver3_unzip_SocketBindRsp(msg_body, msg_len, pBson);
			break;
		case SOCKET_CONNECT_REQ:
				ret = t_rpc_ver3_unzip_SocketConnectReq(msg_body, msg_len, pBson);
			break;
		case SOCKET_CONNECT_RSP:
				ret = t_rpc_ver3_unzip_SocketConnectRsp(msg_body, msg_len, pBson);
			break;
		case SOCKET_DISCONNECT_REQ:
				ret = t_rpc_ver3_unzip_SocketDisconnectReq(msg_body, msg_len, pBson);
			break;
		case SOCKET_DISCONNECT_RSP:
				ret = t_rpc_ver3_unzip_SocketDisconnectRsp(msg_body, msg_len, pBson);
			break;
		case SOCKET_NOTIFY:
				ret = t_rpc_ver3_unzip_SocketNotify(msg_body, msg_len, pBson);
			break;
		case SOCKET_PLUGIN:
				ret = t_rpc_ver3_unzip_SocketPlugIn(msg_body, msg_len, pBson);
			break;
		case SOCKET_PLUGOUT:
				ret = t_rpc_ver3_unzip_SocketPlugOut(msg_body, msg_len, pBson);
			break;
		case SOCKET_RAW_EVENT:
				ret = t_rpc_ver3_unzip_SocketRawEvent(msg_body, msg_len, pBson);
			break;
		case SOCKET_READ:
				ret = t_rpc_ver3_unzip_SocketRead(msg_body, msg_len, pBson);
			break;
		case SOCKET_WRITE:
				ret = t_rpc_ver3_unzip_SocketWrite(msg_body, msg_len, pBson);
			break;
		case UIP_DATA_RECV_REQ:
				ret = t_rpc_ver3_unzip_UIPDataRecvReq(msg_body, msg_len, pBson);
			break;
		case UIP_DATA_RECV_RSP:
				ret = t_rpc_ver3_unzip_UIPDataRecvRsp(msg_body, msg_len, pBson);
			break;
		case UIP_DATA_SEND_REQ:
				ret = t_rpc_ver3_unzip_UIPDataSendReq(msg_body, msg_len, pBson);
			break;
		case UIP_DATA_SEND_RSP:
				ret = t_rpc_ver3_unzip_UIPDataSendRsp(msg_body, msg_len, pBson);
			break;
		case UIP_REGISTER_REQ:
				ret = t_rpc_ver3_unzip_UIPRegisterReq(msg_body, msg_len, pBson);
			break;
		case UIP_REGISTER_RSP:
				ret = t_rpc_ver3_unzip_UIPRegisterRsp(msg_body, msg_len, pBson);
			break;
		case UIP_UNREGISTER_REQ:
				ret = t_rpc_ver3_unzip_UIPUnregisterReq(msg_body, msg_len, pBson);
			break;
		case UIP_UNREGISTER_RSP:
				ret = t_rpc_ver3_unzip_UIPUnregisterRsp(msg_body, msg_len, pBson);
			break;
		default:
 				TOOLSLOG("msg_id:%d unzip failed!", msg_id);
 				ret = dave_false;
 			break;
	}

	return ret;
}

// =====================================================================

void *
t_rpc_ver3_zip(ub msg_id, void *msg_body, ub msg_len)
{
	void *pBson;

	pBson = _t_rpc_zip(msg_id, msg_body, msg_len);
	if(pBson == NULL)
	{
		TOOLSLOG("msg_id:%d zip failed!", msg_id);
		return NULL;
	}

	t_bson_add_int(pBson, "rpc_version", 3);

	#ifdef LEVEL_PRODUCT_alpha
	t_bson_add_int64(pBson, "rpc_time", (u64)dave_os_time_us());
	#endif

	return pBson;
}

dave_bool
t_rpc_ver3_unzip(void **msg_body, ub *msg_len, ub msg_id, s8 *packet_ptr, ub packet_len)
{	void *pBson;
	dave_bool ret = dave_false;

	pBson = t_serialize_to_bson((char *)packet_ptr, (int)packet_len);
	if(pBson == NULL)
	{
		TOOLSLOG("msg_id:%d has invalid bson:%d", msg_id, packet_len);
		return dave_false;
	}

	#ifdef LEVEL_PRODUCT_alpha
	s64 rpc_time;
	if(t_bson_inq_int64(pBson, "rpc_time", (u64 *)(&rpc_time)) == true) {
		rpc_time = (s64)dave_os_time_us() - rpc_time;
		if(rpc_time > 3000000)
			TOOLSLOG("msg_id:%s took too much time:%ld in transit or the time of the transmission parties is out of sync.", msgstr(msg_id), rpc_time);
	}
	#endif

	ret = _t_rpc_unzip(msg_body, msg_len, msg_id, pBson);

	t_bson_free_object(pBson);

	return ret;
}

