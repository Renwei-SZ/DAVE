FROM ubuntu:18.04

ARG VSYS_VER=0.4.1
ENV VSYS_DIR=/vsys
ENV VSYS_JAR=vsys.jar
ENV VSYS_CONF=vsys.conf

RUN ln -s /usr/share/zoneinfo/Asia/Hong_Kong /etc/localtime

RUN apt-get update --fix-missing && \
    apt-get upgrade -y --fix-missing && \
    apt-get install -y openjdk-8-jdk \
        wget

RUN mkdir -p ${VSYS_DIR}
WORKDIR ${VSYS_DIR}

RUN wget -q -O ${VSYS_JAR} \
    https://github.com/virtualeconomy/v-systems/releases/download/v${VSYS_VER}/v-systems-${VSYS_VER}.jar

RUN chmod +x ${VSYS_JAR}

CMD java -jar ${VSYS_DIR}/${VSYS_JAR} ${VSYS_DIR}/${VSYS_CONF}
